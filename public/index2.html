<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexus Chat - Advanced Video Connection</title>
    
    <!-- SEO & Meta Tags -->
    <meta name="description" content="Connect with people worldwide through video chat. Real-time connections with smart matching.">
    <meta name="keywords" content="video chat, random chat, meet new people, online chat">
    <meta name="author" content="Nexus Chat">
    <meta property="og:title" content="Nexus Chat - Connect Worldwide">
    <meta property="og:description" content="Real-time video connections with intelligent matching.">
    <meta property="og:type" content="website">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-center"></div>
            </div>
            <h2 class="loading-text">Initializing Nexus Chat</h2>
            <p class="loading-subtext">Connecting to secure servers...</p>
        </div>
    </div>

    <!-- Background Animation -->
    <div class="background-animation">
        <div class="particles-container" id="particles"></div>
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Join Screen -->
    <div id="joinScreen" class="join-screen">
        <div class="glass-panel join-container">
            <div class="logo-brand">
                <div class="logo-icon">
                    <i class="ri-video-chat-line"></i>
                </div>
                <h1 class="logo-text">Nexus Chat</h1>
                <p class="logo-tagline">Intelligent video connections worldwide</p>
            </div>
            
            <div class="join-form">
                <div class="form-group">
                    <label for="nameInput" class="form-label">
                        <i class="ri-user-3-line"></i> Display Name
                    </label>
                    <input 
                        id="nameInput" 
                        class="form-input" 
                        type="text" 
                        placeholder="Enter your name..." 
                        autocomplete="off"
                        maxlength="20"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="languageSelect" class="form-label">
                        <i class="ri-global-line"></i> Preferred Language
                    </label>
                    <select id="languageSelect" class="form-select">
                        <option value="en">English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="interestsInput" class="form-label">
                        <i class="ri-hashtag"></i> Interests (comma separated)
                    </label>
                    <input 
                        id="interestsInput" 
                        class="form-input" 
                        type="text" 
                        placeholder="music, gaming, sports, tech..."
                        autocomplete="off"
                    >
                </div>
                
                <button id="joinBtn" class="primary-btn join-btn">
                    <span>Enter Nexus</span>
                    <i class="ri-arrow-right-line"></i>
                </button>
            </div>
            
            <div class="join-footer">
                <p class="terms-text">
                    By joining, you agree to our 
                    <a href="#" class="terms-link">Community Guidelines</a> and 
                    <a href="#" class="terms-link">Privacy Policy</a>
                </p>
                <div class="security-badge">
                    <i class="ri-shield-check-line"></i>
                    <span>End-to-End Encrypted</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appContainer" class="app-container hidden">
        <!-- Header -->
        <header class="glass-panel app-header">
            <div class="header-left">
                <div class="app-logo">
                    <i class="ri-global-line"></i>
                    <span class="logo-text">Nexus</span>
                </div>
                
                <div class="status-indicator">
                    <div id="statusDot" class="status-dot"></div>
                    <span id="statusText" class="status-text">Ready to connect</span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="online-indicator">
                    <div class="online-dot"></div>
                    <span id="onlineCount" class="online-count">0</span>
                    <span class="online-text">online</span>
                </div>
                
                <div id="userProfile" class="user-profile">
                    <div class="user-avatar">
                        <i class="ri-user-line"></i>
                    </div>
                    <span id="userName" class="username">Guest</span>
                </div>
                
                <button id="preferencesBtn" class="icon-btn" title="Preferences">
                    <i class="ri-settings-3-line"></i>
                </button>
                
                <button id="reportBtn" class="icon-btn" title="Report">
                    <i class="ri-flag-line"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Video Section -->
            <section class="glass-panel video-section">
                <div class="video-grid">
                    <!-- Local Video -->
                    <div class="video-container local-video">
                        <div class="video-overlay">
                            <div class="video-label">
                                <div class="user-badge">
                                    <i class="ri-user-line"></i>
                                </div>
                                <span id="localUserName">You</span>
                            </div>
                            <div class="video-stats">
                                <span class="stat-item">
                                    <i class="ri-wifi-line"></i>
                                    <span id="localBitrate">--</span>
                                </span>
                                <span class="stat-item">
                                    <i class="ri-cpu-line"></i>
                                    <span id="localFramerate">--</span>
                                </span>
                            </div>
                        </div>
                        <video id="localVideo" autoplay muted playsinline></video>
                    </div>
                    
                    <!-- Remote Video -->
                    <div class="video-container remote-video">
                        <div class="video-overlay">
                            <div class="video-label">
                                <div class="user-badge">
                                    <i class="ri-user-search-line"></i>
                                </div>
                                <span id="remoteUserName">Stranger</span>
                                <span id="matchScore" class="match-score hidden">0% match</span>
                            </div>
                            <div class="video-stats">
                                <span class="stat-item">
                                    <i class="ri-wifi-line"></i>
                                    <span id="remoteBitrate">--</span>
                                </span>
                                <span class="stat-item">
                                    <i class="ri-cpu-line"></i>
                                    <span id="remoteFramerate">--</span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- Waiting State -->
                        <div id="waitingState" class="waiting-state">
                            <div class="waiting-content">
                                <div class="search-animation">
                                    <div class="search-dot"></div>
                                    <div class="search-dot"></div>
                                    <div class="search-dot"></div>
                                </div>
                                <h3>Finding Your Match</h3>
                                <p>Searching for compatible partners worldwide...</p>
                                
                                <div class="waiting-stats">
                                    <div class="stat">
                                        <i class="ri-user-search-line"></i>
                                        <span>Position: <span id="waitingPosition">1</span></span>
                                    </div>
                                    <div class="stat">
                                        <i class="ri-time-line"></i>
                                        <span>Est. time: <span id="estimatedTime">5</span>s</span>
                                    </div>
                                </div>
                                
                                <div class="tips">
                                    <p><i class="ri-lightbulb-line"></i> Tip: Add more interests for better matches</p>
                                </div>
                            </div>
                        </div>
                        
                        <video id="remoteVideo" autoplay playsinline class="hidden"></video>
                    </div>
                </div>
                
                <!-- Controls -->
                <div class="controls-container">
                    <div class="controls-group">
                        <button id="startBtn" class="control-btn start-btn">
                            <i class="ri-play-fill"></i>
                            <span>Start</span>
                        </button>
                        
                        <button id="nextBtn" class="control-btn next-btn" disabled>
                            <i class="ri-skip-forward-line"></i>
                            <span>Next</span>
                        </button>
                        
                        <button id="stopBtn" class="control-btn stop-btn" disabled>
                            <i class="ri-stop-line"></i>
                            <span>Stop</span>
                        </button>
                    </div>
                    
                    <div class="media-controls">
                        <button id="videoToggleBtn" class="icon-btn media-btn" disabled>
                            <i class="ri-video-line"></i>
                        </button>
                        
                        <button id="audioToggleBtn" class="icon-btn media-btn" disabled>
                            <i class="ri-mic-line"></i>
                        </button>
                        
                        <button id="screenShareBtn" class="icon-btn media-btn" disabled>
                            <i class="ri-share-line"></i>
                        </button>
                        
                        <button id="fullscreenBtn" class="icon-btn media-btn">
                            <i class="ri-fullscreen-line"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Chat Section -->
            <aside class="glass-panel chat-section">
                <div class="chat-header">
                    <h3><i class="ri-message-3-line"></i> Live Chat</h3>
                    <div class="chat-info">
                        <span id="messageCount">0 messages</span>
                        <i class="ri-information-line"></i>
                    </div>
                </div>
                
                <!-- Online Users Sidebar -->
                <div class="online-sidebar">
                    <div class="sidebar-header">
                        <i class="ri-user-line"></i>
                        <span>Online Now</span>
                    </div>
                    <div id="onlineList" class="online-list">
                        <!-- Filled dynamically -->
                    </div>
                </div>
                
                <!-- Messages -->
                <div id="messagesContainer" class="messages-container">
                    <div class="message message-system">
                        <i class="ri-information-line"></i>
                        Welcome to Nexus Chat! Press "Start" to begin connecting with people worldwide.
                    </div>
                </div>
                
                <!-- Typing Indicator -->
                <div id="typingIndicator" class="typing-indicator hidden">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span class="typing-text"></span>
                </div>
                
                <!-- Chat Input -->
                <div class="chat-input-container">
                    <div class="input-wrapper">
                        <input 
                            id="messageInput" 
                            class="chat-input" 
                            type="text" 
                            placeholder="Type your message here..." 
                            disabled
                            autocomplete="off"
                            maxlength="500"
                        >
                        <div class="input-actions">
                            <button class="input-action-btn" title="Emoji">
                                <i class="ri-emotion-line"></i>
                            </button>
                            <button class="input-action-btn" title="Send file">
                                <i class="ri-attachment-line"></i>
                            </button>
                        </div>
                    </div>
                    <button id="sendBtn" class="send-btn" disabled>
                        <i class="ri-send-plane-fill"></i>
                    </button>
                </div>
            </aside>
        </main>

        <!-- Connection Quality Indicator -->
        <div class="connection-quality">
            <div class="quality-indicator">
                <i class="ri-wifi-line"></i>
                <span class="quality-text">Excellent</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Preferences Modal -->
    <div id="preferencesModal" class="modal hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3><i class="ri-settings-3-line"></i> Preferences</h3>
                <button id="closePreferencesBtn" class="modal-close">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="preferences-form">
                    <div class="preference-group">
                        <h4><i class="ri-filter-line"></i> Match Preferences</h4>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" name="matchSameLanguage" checked>
                                <span>Match with same language speakers</span>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <span>Age Range:</span>
                                <input type="range" min="18" max="80" value="30" class="range-input">
                                <span class="range-value">18-30</span>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <span>Connection Quality:</span>
                                <select class="form-select">
                                    <option>Auto</option>
                                    <option>High Quality</option>
                                    <option>Low Bandwidth</option>
                                </select>
                            </label>
                        </div>
                    </div>
                    
                    <div class="preference-group">
                        <h4><i class="ri-notification-line"></i> Notifications</h4>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" name="notifyMessages" checked>
                                <span>New messages</span>
                            </label>
                        </div>
                        
                        <div class="preference-item">
                            <label class="preference-label">
                                <input type="checkbox" name="notifyConnection" checked>
                                <span>Connection status</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="savePreferencesBtn" class="primary-btn">
                    <i class="ri-save-line"></i>
                    Save Preferences
                </button>
            </div>
        </div>
    </div>
    
    <!-- Report Modal -->
    <div id="reportModal" class="modal hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3><i class="ri-flag-line"></i> Report User</h3>
                <button id="closeReportBtn" class="modal-close">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="report-form">
                    <div class="form-group">
                        <label class="form-label">Reason for report:</label>
                        <select id="reportCategory" class="form-select">
                            <option value="">Select a category</option>
                            <option value="inappropriate">Inappropriate behavior</option>
                            <option value="harassment">Harassment</option>
                            <option value="spam">Spam</option>
                            <option value="underage">Underage user</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Additional details:</label>
                        <textarea 
                            id="reportReason" 
                            class="form-textarea" 
                            placeholder="Please provide more details..."
                            rows="4"
                        ></textarea>
                    </div>
                    
                    <div class="report-note">
                        <i class="ri-information-line"></i>
                        Your report is anonymous and will be reviewed within 24 hours.
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="submitReportBtn" class="primary-btn danger">
                    <i class="ri-send-plane-line"></i>
                    Submit Report
                </button>
            </div>
        </div>
    </div>
    
    <!-- Audio Alert (hidden) -->
    <audio id="messageSound" preload="auto">
        <source src="/assets/message.mp3" type="audio/mpeg">
    </audio>
    <audio id="connectSound" preload="auto">
        <source src="/assets/connect.mp3" type="audio/mpeg">
    </audio>
    <audio id="disconnectSound" preload="auto">
        <source src="/assets/disconnect.mp3" type="audio/mpeg">
    </audio>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>